// testCases.ts
import type { UserProfile } from './main';

export type TestCase = {
    description: string;
    content: string;
    // Функция, которая проверяет, что извлеченные данные верны
    validator?: (output: UserProfile) => boolean;
};

export const testCases: TestCase[] = [
    // --- ОСНОВНЫЕ КЕЙСЫ ---
    {
        description: "Простой и полный кейс",
        content: "Анна Петрова, ей 30 лет. Она админ. Её почта anna@example.com. Обожает плавание и чтение книг. Живет в Москве по адресу ул. Тверская, д. 10, индекс 125009.",
        validator: (o) => o.name === 'Анна Петрова' && o.age === 30 && o.role === 'admin' && o.email === 'anna@example.com' && o.address?.city === 'Москва' && o.hobbies?.length === 2
    },
    {
        description: "Неполная информация (без email, хобби, индекса)",
        content: "Пользователь Иван. Ему 45. Он обычный юзер. Живет в Санкт-Петербурге на Невском проспекте, 5.",
        validator: (o) => o.name === 'Иван' && o.age === 45 && o.role === 'user' && o.address?.city === 'Санкт-Петербург' && o.email === null
    },
    {
        description: "Неструктурированный, повествовательный текст",
        content: "Я вчера говорил с Марией. Она рассказала, что ей недавно исполнилось 25, и она работает в нашей системе как гость. Кажется, она живет где-то на проспекте Мира в Москве. Из увлечений она упоминала только йогу.",
        validator: (o) => o.name === 'Мария' && o.age === 25 && o.role === 'guest' && o.hobbies?.includes('йога') === true && o.address?.city === 'Москва'
    },
    {
        description: "Информация о нескольких людях (модель должна выбрать первого/главного)",
        content: "В команде два человека: главный администратор Сергей, 50 лет, и его помощник Олег, 28 лет, который является пользователем.",
        validator: (o) => o.name === 'Сергей' && o.age === 50 && o.role === 'admin'
    },
    {
        description: "Сложный для парсинга случай (с неоднозначностью возраста)",
        content: "Имя пользователя - 'Алекс'. Его возраст где-то между 20 и 22 годами. Роль у него гостевая. Он ничего не рассказывал про хобби. Адрес не указан.",
        validator: (o) => o.name === 'Алекс' && (o.age === 20 || o.age === 21 || o.age === 22) && o.role === 'guest' && o.address === null
    },
    {
        description: "Кейс, где данные почти отсутствуют (проверка на галлюцинации)",
        content: "Просто зарегистрируйте нового пользователя по имени Кирилл.",
        validator: (o) => o.name === 'Кирилл' && o.age === null && o.email === null && o.role === null && o.address === null
    },
    {
        description: "Кейс с лишней, нерелевантной информацией",
        content: "Петр, 33 года, роль 'user'. Он любит готовить, кататься на лыжах и смотреть кино. Его любимый фильм - 'Начало'. Живет в Казани, ул. Баумана, 1.",
        validator: (o) => o.name === 'Петр' && o.age === 33 && o.role === 'user' && o.hobbies?.length === 3 && o.address?.city === 'Казань'
    },

    // ** Категория: Вариации формата данных **
    {
        description: "Возраст и данные написаны словами",
        content: "Елене двадцать один год. Ее роль — пользователь. Она живет в городе Сочи, на улице Морской. Увлекается фотографией.",
        validator: (o) => o.name === 'Елена' && o.age === 21 && o.role === 'user' && o.address?.city === 'Сочи'
    },
    {
        description: "Данные с опечатками",
        content: "Пользователь Семён, вораст 35 лет. Его имейл semon@mymail.ru. Он одминистратор. Проживает в г. Омск.",
        validator: (o) => o.name === 'Семён' && o.age === 35 && o.email === 'semon@mymail.ru' && o.role === 'admin' && o.address?.city === 'Омск'
    },
    {
        description: "Список хобби с разными разделителями",
        content: "Дмитрий, 28 лет, гость. Хобби: футбол, программирование и путешествия. Еще он любит читать научную фантастику.",
        validator: (o) => o.name === 'Дмитрий' && o.age === 28 && o.role === 'guest' && (o.hobbies?.length ?? 0) >= 3
    },

    // ** Категория: Семантическая сложность **
    {
        description: "Косвенное указание роли и отрицание",
        content: "Виктор — главный по всей системе, так что он не обычный пользователь и уж точно не гость. Ему сорок лет. Почту он не давал. Единственное увлечение — шахматы. Адрес: Новосибирск, Красный проспект, 100.",
        validator: (o) => o.name === 'Виктор' && o.age === 40 && o.role === 'admin' && (o.hobbies?.includes('шахматы') === true) && o.email === null
    },
    {
        description: "Противоречивая информация (модель должна выбрать последнюю/наиболее вероятную)",
        content: "Записываем нового пользователя. Имя: Андрей, возраст 29. Ой, нет, ему уже исполнилось 30. Роль — user. Хотя нет, давайте сделаем его админом.",
        validator: (o) => o.name === 'Андрей' && o.age === 30 && o.role === 'admin'
    },
    {
        description: "Информация, относящаяся к будущему/прошлому",
        content: "Раньше Светлана была гостем, но с завтрашнего дня ее роль будет 'user'. Ей 26. Она переезжает в Калининград на следующей неделе. Сейчас живет в Мурманске. Увлекается альпинизмом.",
        validator: (o) => o.name === 'Светлана' && o.age === 26 && (o.role === 'user') && o.address?.city === 'Мурманск'
    },

    // ** Категория: Структурные вызовы **
    {
        description: "Данные в виде списка или таблицы",
        content: "Информация по новому сотруднику:\n- ФИО: Васильев Игорь\n- Возраст: 38\n- Должность в системе: user\n- Адрес: Екатеринбург, ул. Малышева, д. 44\n- Хобби: рыбалка",
        validator: (o) => o.name === 'Васильев Игорь' && o.age === 38 && o.role === 'user' && o.address?.city === 'Екатеринбург' && (o.hobbies?.includes('рыбалка') === true)
    },
    {
        description: "Ключевая информация разбросана по всему тексту",
        content: "К нам присоединился новый коллега, его зовут Максим. Он будет помогать нам с модерацией, так что у него права администратора. Мы знаем, что он живет в Нижнем Новгороде. Кстати, ему недавно исполнилось 32. Про увлечения он пока не рассказывал.",
        validator: (o) => o.name === 'Максим' && o.age === 32 && o.role === 'admin' && o.address?.city === 'Нижний Новгород'
    },

    // ** Категория: Граничные и стресс-кейсы **
    {
        description: "Текст на английском языке",
        content: "User profile: John Doe, age 42. He is a 'guest' user. Email is john.d@web.com. Hobbies include hiking and coding. Lives in New York, 123 Broadway St.",
        validator: (o) => o.name === 'John Doe' && o.age === 42 && o.role === 'guest' && o.email === 'john.d@web.com' && o.address?.city === 'New York'
    },
    {
        description: "Полностью нерелевантный текст",
        content: "Солнце светило ярко, птицы пели. Это был прекрасный день для прогулки в парке. На деревьях начали появляться первые зеленые листья.",
        validator: (o) => o.name === null && o.age === null && o.role === null // Проверяем, что модель не выдумала ключевые данные
    },
    {
        description: "Текст содержит JSON-подобные фрагменты, которые могут сбить с толку",
        content: "Его логин в системе 'user_123', а пароль, который он хотел, был '{\"role\":\"admin\"}', но мы ему отказали. Настоящая его роль 'guest'. Зовут его Павел, 24 года.",
        validator: (o) => o.name === 'Павел' && o.age === 24 && o.role === 'guest'
    },
    {
        description: "Очень короткий, но полный набор данных",
        content: "Ирина, 29, user, irina@test.com, Москва, хобби: танцы.",
        validator: (o) => o.name === 'Ирина' && o.age === 29 && o.role === 'user' && o.email === 'irina@test.com' && o.address?.city === 'Москва'
    },
    {
        description: "Кейс с явно отсутствующими полями",
        content: "Имя: Ольга. Возраст: не указан. Роль: user. Хобби: нет. Адрес: не предоставлен.",
        validator: (o) => o.name === 'Ольга' && o.age === null && o.role === 'user' && (o.hobbies === null || o.hobbies?.length === 0) && o.address === null
    }
];